<!-- <form autocomplete="off" action="/interaction/<%= uid %>/login" method="post">
  <input required type="text" name="xxx" placeholder="Enter login" <% if (!params.login_hint) { %>autofocus="on"<% } else { %> value="<%= params.login_hint %>" <% } %>>
  <input required type="password" name="yyyy" placeholder="and password" <% if (params.login_hint) { %>autofocus="on"<% } %>>

  <button type="submit" class="login login-submit">Sign-in</button>
</form> -->

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <script src="https://cdn.jsdelivr.net/npm/web3@1.8.0/dist/web3.min.js"></script>
    <script>
      window.addEventListener("load", () => {
        if (!window.ethereum) {
          return
        }

        const $ = document.querySelector.bind(document)

        window.web3 = new Web3(ethereum);

        const onConnect = async () => {
          // Open a connect window. It resolves when the connection is accepted.
          const [account] = await ethereum.enable()

          $("#connected-account").textContent = `Connected: ${account}`

          const message = "HELLO, WORLD" // TODO:
          const accounts = await web3.eth.getAccounts() // ユーザーのアドレスの配列が取れる
          const signature = await web3.eth.personal.sign(message, accounts[0], '') // 署名できる
          console.log(signature)
        }

        $("#connect").addEventListener("click", onConnect)
      })
    </script>
  </head>
  <body>
    <!-- walletをコネクトする -->
    <section>
      <button id="connect">Connect to Metamask</button>
      <span id="connected-account"></span>
    </section>

    <!-- 署名後に入力 -->
    <form autocomplete="off" action="/interaction/<%= uid %>/login" method="post">
      <div>
        <label>
          contractAddress
          <input name="contractAddress" value="" />
        </label>
      </div>
      <div>
        <label>
          tokenID
          <input name="tokenID" value="" />
        </label>
      </div>

      <button type="submit" class="login login-submit">Sign-in</button>
    </form>
  </body>
</html>
